# Генерация фейковых новостей 

Генерация происходит в режиме взаимодействия с пользователем в Telegram-боте. Бот даёт возмозможность сгенерировать текст с помощью нейронной сети и с помощью поиска наиболее часто используемых выражений. 

![Работа бота](https://github.com/katerinna/tgdeerbot/blob/main/doc_2021-11-14_22-21-58.gif)

Работа бот организована в несколько этапов.

## 1. Граббер по API Вконтакте 

> vkgrabber.py

Использована библиотека [vk_api](https://vk.com/dev/manuals), записи со стены группы импортированы с помощью функции [vk.wall.get](https://vk.com/dev/wall.get)
При скачивании данные были очищены от специфичных постов и строк с хештегами. Специфичные символы были удалены. 

Данные были отправлены в текстовый файл. 

> txtfile.txt

## 2. Обучение нейронной сети

> txtfile.h5

Нейронная сеть состоит из Embedding слоя, двух LSTM, двух Drop-Out слоёв.
Словарь составлен с помощью класса Vectorizer. Для обучения взято окло 3 тысяч постов, обучение проходило в 300 эпох. 

Генерация происходит по случайно выбранному из списка Seed слову.
Генерируется случайное количество слов (до 80), вывод текста останавливается на последней упомянутой точке. 

> vectorizernn.py

## 3. Алгоритм автоподстановки

Вынесен в отдельный файл:

> autosubstit.py

Из текста убраны знаки препинания и цифры. Определены функции:
* new_word, генерирующая следующее слово из наиболее упоминаемых после заданного;
* wnext, читающая инструкции пользователя в формате _слово, N_, где N - количество слов. Если заданные инструкции не подходят формату, возвращается сообщение "Не понимаю инструкций". 

## 4. Обращение с ботом

> bot.py

Использована библиотка [aiogram](https://docs.aiogram.dev/en/latest/), бот вызван по токену. 
Для клавиатуры использован метод [KeyboardButton](https://docs.aiogram.dev/en/latest/telegram/types/reply_keyboard.html). 

Помимо реакции на /start, реализована функция-ответ на введённое пользователем сообщение. 

Также реализована функция writeresult, дописывающая ID пользователя и вызванный метод генерации в базу. 
Для пользователя предусмотрена личная статистика. Вызывается по соответствующей кнопке клавиатуры. 
